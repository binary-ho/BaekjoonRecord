# [Platinum III] 전설 - 19585 

7달 만에 푼 문제, 당시 내가 아는 모든 알고리즘이 사용 되었다. <br>
해싱을 하였으나, 시간 초과가 나왔다. 이 때는 그 이유를 알지 못 했다. <br>
아슬아슬 하게 시간초과가 나와서 시간을 줄이려고 별 시도를 다 해보았다. <br>
이후 트라이를 해 보았다. <br>
트라이 또한 별 시도를 다 해봣다. <br>
child 포인터를 가진 자료구조를 배열로 했다가, 배열로 했다가, 별 짓을 다 했다. <br>
진짜 이것저것 진짜 많이 시도했다가 결국 포기했었다. <br>
해싱 사이즈를 늘렸다가 줄였다가.. 트라이 자료구조를 개선했다가... <br>
그렇게 처참하게 포기했던 문제를 7달 만에 다시 풀었다. <br>
바로 멋진 아이디어가 떠올랐는데, 그것은 트라이와 해싱을 같이 쓰는 것이였다. <Br>
그 이유는, 해싱으로 푼 경우, 색 이름을 한 글자 한 글자 색 이름 해싱에 넣어보고, 나머지 부분을 또 매번 팀 이름 해싱 테이블에 계속 매칭해줬고, <br>
트라이의 경우도, 색 이름을 탐지하게 될 때마다, 그 뒷부분이 매번 트라이 탐색에 들어가니, 시간이 오래 걸릴 수 밖에 없었다. <br>
그래서 앞 부분은 트라이로 찾고, 뒷 부분은 해싱으로 바로 검색하는 아이디어를 떠올렸다 <br>
일전에 시도한 두 아이디어를 합친 것이다! <br>
그러나 또 시간초과가 나서 너무 지친 나머지 질문 게시판을 봤다. <br>
나와 같이 푼 사람이 있었는데, 시간초과가 난 이유는 시간초과를 유발하기 위해서, 이미 가능성이 없음에도 계속해서 팀 이름 탐색을 하도록 만드는 케이스가 있다고 했다 <br>
나는 왜 이런 부분을 놓쳤을까? 하여튼 이런 케이스 탐색을 막아주기 위헤서, 팀 이름의 길이의 상한을 찾아낸 다음, <br> 
팀 이름으로서의 가능성이 아주 없는 케이스를 순수하게 길이로만 판단하여 아예 탐색하지 않도록 해주었다. <br>
영광의 맞았습니다를 받았다. 7개월만이였다. <Br>
질문 게시판에서 진짜 멋진 풀이를 봤는데, 어차피 이름이 색 + 팀의 조합이고, 이를 찾아내야 하므로, <br> 
색은 일반 트라이로 저장하고, **팀은 거꾸로 트라이에 저장하는 것이다** <bR>
그다음 한 이름을 탐색할 때, 순방향으로 색을 탐색하고, 거꾸로 팀을 탐색해서 그 위치들만을 기록한 다음, 위치가 맞물리는 곳을 찾아내는 풀이이다. <br>
읽자마자 너무 놀랐다. 이런 멋진 생각은 어떻게 한 것일까? <bR>
하여튼 무려 7달 만에 풀어서 감격스러운 문제이다.


[문제 링크](https://www.acmicpc.net/problem/19585) 

### 성능 요약

메모리: 1043332 KB, 시간: 2376 ms

### 분류

자료 구조(data_structures), 해싱(hashing), 문자열(string), 트리(trees), 트라이(trie)

### 문제 설명

<p>Sogang ICPC Team에는 색상 이름과 닉네임의 순서로 이여서 팀명을 지으면 ICPC 리저널에서 수상할 수 있다는 전설이 있다. 색상 이름들과 닉네임들이 주어질 때, <em>Q</em>개의 팀에 대해 다음 리저널에서 수상할 수 있을지 전설에 기반해 알려주는 프로그램을 작성하자.</p>

### 입력 

 <p>첫째 줄에는 색상의 종류 <em>C</em>와 닉네임의 개수 <em>N</em>이 주어진다. (1 ≤ <em>C</em>, <em>N</em> ≤ 4,000)</p>

<p>다음 <em>C</em>개의 줄에는 색상 이름 <em>C</em>개가 한 줄에 하나씩 주어진다. 색상 이름은 중복되지 않는다.</p>

<p>다음 <em>N</em>개의 줄에는 Sogang ICPC Team 구성원들의 닉네임 <em>N</em>개가 한 줄에 하나씩 주어진다. 닉네임도 중복되지 않는다.</p>

<p>다음 줄에는 팀의 개수 <em>Q</em>가 주어진다. (1 ≤ <em>Q</em> ≤ 20,000)</p>

<p>다음 <em>Q</em>개의 줄에는 팀명 <em>Q</em>개가 한 줄에 하나씩 주어진다. 팀명은 중복되지 않는다.</p>

<p>모든 색상 이름의 길이와 닉네임의 길이는 1,000글자를 넘지 않는다. 모든 팀명은 2,000글자를 넘지 않는다. 모든 문자열은 알파벳 소문자로만 이루어져 있다.</p>

### 출력 

 <p>팀명이 입력된 순서대로, 전설에 따라 해당 팀이 다음 리저널에서 수상할 수 있다면 <tt><span style="background-color:#dddddd;">Yes</span></tt>, 아니라면 <tt><span style="background-color:#dddddd;">No</span></tt>를 출력한다.</p>

